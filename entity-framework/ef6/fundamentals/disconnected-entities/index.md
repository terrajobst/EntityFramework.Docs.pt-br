---
title: Trabalhando com entidades desconectadas – EF6
author: divega
ms.date: 10/23/2016
ms.assetid: 12138003-a373-4817-b1b7-724130202f5f
ms.openlocfilehash: f1ce44e7b00ec4c60a81ed850ce5c9d866495e1b
ms.sourcegitcommit: cc0ff36e46e9ed3527638f7208000e8521faef2e
ms.translationtype: HT
ms.contentlocale: pt-BR
ms.lasthandoff: 03/06/2020
ms.locfileid: "78413361"
---
# <a name="working-with-disconnected-entities"></a><span data-ttu-id="deda5-102">Trabalhando com entidades desconectadas</span><span class="sxs-lookup"><span data-stu-id="deda5-102">Working with disconnected entities</span></span>
<span data-ttu-id="deda5-103">Em um aplicativo baseado no Entity Framework, uma classe de contexto é responsável por detectar alterações aplicadas a entidades controladas.</span><span class="sxs-lookup"><span data-stu-id="deda5-103">In an Entity Framework-based application, a context class is responsible for detecting changes applied to tracked entities.</span></span> <span data-ttu-id="deda5-104">Chamar o método SaveChanges mantém as alterações controladas pelo contexto para o banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deda5-104">Calling the SaveChanges method persists the changes tracked by the context to the database.</span></span> <span data-ttu-id="deda5-105">Ao trabalhar com aplicativos de N camadas, os objetos de entidade normalmente são modificados enquanto estão desconectados do contexto, e você deve decidir como rastrear as alterações e relatar essas alterações de volta para o contexto.</span><span class="sxs-lookup"><span data-stu-id="deda5-105">When working with n-tier applications, entity objects are usually modified while disconnected from the context, and you must decide how to track changes and report those changes back to the context.</span></span> <span data-ttu-id="deda5-106">Este tópico discute as diferentes opções que estão disponíveis ao usar o Entity Framework com entidades desconectadas.</span><span class="sxs-lookup"><span data-stu-id="deda5-106">This topic discusses different options that are available when using Entity Framework with disconnected entities.</span></span>   

## <a name="web-service-frameworks"></a><span data-ttu-id="deda5-107">Estruturas de serviço Web</span><span class="sxs-lookup"><span data-stu-id="deda5-107">Web service frameworks</span></span>

<span data-ttu-id="deda5-108">As tecnologias de serviços Web geralmente são compatíveis com padrões que podem ser usados para manter as alterações feitas em objetos desconectados individuais.</span><span class="sxs-lookup"><span data-stu-id="deda5-108">Web services technologies typically support patterns that can be used to persist changes on individual disconnected objects.</span></span> <span data-ttu-id="deda5-109">Por exemplo, o ASP.NET Web API permite que você codifique ações do controlador que podem incluir chamadas para o EF para manter as alterações feitas em um objeto em um banco de dados.</span><span class="sxs-lookup"><span data-stu-id="deda5-109">For example, ASP.NET Web API allows you to code controller actions that can include calls to EF to persist changes made to an object on a database.</span></span> <span data-ttu-id="deda5-110">Na verdade, as ferramentas da API Web no Visual Studio facilitam a realização do scaffolding de um controlador da API Web do seu modelo do Entity Framework 6.</span><span class="sxs-lookup"><span data-stu-id="deda5-110">In fact, the Web API tooling in Visual Studio makes it easy to scaffold a Web API controller from your Entity Framework 6 model.</span></span> <span data-ttu-id="deda5-111">Para obter mais informações, consulte [usando a API Web com o Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span><span class="sxs-lookup"><span data-stu-id="deda5-111">For more information, see [using Web API with Entity Framework 6](https://docs.microsoft.com/aspnet/web-api/overview/data/using-web-api-with-entity-framework/).</span></span>   

<span data-ttu-id="deda5-112">Historicamente, houve várias outras tecnologias de serviços Web que ofereciam a integração com o Entity Framework, como o [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) e o [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span><span class="sxs-lookup"><span data-stu-id="deda5-112">Historically, there have been several other Web services technologies that offered integration with Entity Framework, like [WCF Data Services](https://docs.microsoft.com/dotnet/framework/data/wcf/create-a-data-service-using-an-adonet-ef-data-wcf) and [RIA Services](https://docs.microsoft.com/previous-versions/dotnet/wcf-ria/ee707344(v=vs.91)).</span></span>

## <a name="low-level-ef-apis"></a><span data-ttu-id="deda5-113">APIs do EF de baixo nível</span><span class="sxs-lookup"><span data-stu-id="deda5-113">Low-level EF APIs</span></span>

<span data-ttu-id="deda5-114">Se você não quiser usar uma solução de N camadas existente ou se desejar personalizar o que acontece dentro de uma ação do controlador em serviços de API Web, o Entity Framework fornece APIs que permitem aplicar as alterações feitas em uma camada desconectada.</span><span class="sxs-lookup"><span data-stu-id="deda5-114">If you don't want to use an existing n-tier solution, or if you want to customize what happens inside a controller action in a Web API services, Entity Framework provides APIs that allow you to apply changes made on a disconnected tier.</span></span> <span data-ttu-id="deda5-115">Para obter mais informações, consulte [Adicionar, Anexar e estado da entidade](~/ef6/saving/change-tracking/entity-state.md).</span><span class="sxs-lookup"><span data-stu-id="deda5-115">For more information, see [Add, Attach, and entity state](~/ef6/saving/change-tracking/entity-state.md).</span></span>  

## <a name="self-tracking-entities"></a><span data-ttu-id="deda5-116">Entidades de rastreamento automático</span><span class="sxs-lookup"><span data-stu-id="deda5-116">Self-Tracking Entities</span></span>  

<span data-ttu-id="deda5-117">O controle de alterações em grafos arbitrários de entidades enquanto estão desconectadas do contexto do EF é um problema difícil.</span><span class="sxs-lookup"><span data-stu-id="deda5-117">Tracking changes on arbitrary graphs of entities while disconnected from the EF context is a hard problem.</span></span> <span data-ttu-id="deda5-118">Uma das tentativas de resolvê-lo foi o modelo de geração de código de Entidades de Rastreamento Automático.</span><span class="sxs-lookup"><span data-stu-id="deda5-118">One of the attempts to solve it was the Self-Tracking Entities code generation template.</span></span> <span data-ttu-id="deda5-119">Esse modelo gera classes de entidade que contêm a lógica para rastrear as alterações feitas em uma camada desconectada, como estado nas entidades em si.</span><span class="sxs-lookup"><span data-stu-id="deda5-119">This template generates entity classes that contain logic to track changes made on a disconnected tier as state in the entities themselves.</span></span> <span data-ttu-id="deda5-120">Um conjunto de métodos de extensão também é gerado para aplicar essas alterações para um contexto.</span><span class="sxs-lookup"><span data-stu-id="deda5-120">A set of extension methods is also generated to apply those changes to a context.</span></span>

<span data-ttu-id="deda5-121">Esse modelo pode ser usado com modelos criados usando o EF Designer, mas não pode ser usado com modelos do Code First.</span><span class="sxs-lookup"><span data-stu-id="deda5-121">This template can be used with models created using the EF Designer, but can not be used with Code First models.</span></span> <span data-ttu-id="deda5-122">Para obter mais informações, consulte [Entidades de rastreamento automático](self-tracking-entities/index.md).</span><span class="sxs-lookup"><span data-stu-id="deda5-122">For more information, see [Self-Tracking Entities](self-tracking-entities/index.md).</span></span>  

> [!IMPORTANT]
> <span data-ttu-id="deda5-123">Não recomendamos usar o modelo de entidades de rastreamento automático.</span><span class="sxs-lookup"><span data-stu-id="deda5-123">We no longer recommend using the self-tracking-entities template.</span></span> <span data-ttu-id="deda5-124">Ele continuará disponível apenas para dar suporte aos aplicativos existentes.</span><span class="sxs-lookup"><span data-stu-id="deda5-124">It will only continue to be available to support existing applications.</span></span> <span data-ttu-id="deda5-125">Se o seu aplicativo exigir o trabalho com grafos de entidades desconectados, considere outras alternativas como [Entidades Rastreáveis](https://trackableentities.github.io/), que são uma tecnologia semelhante às Entidades de Rastreamento Automático desenvolvidas mais ativamente pela comunidade, ou escreva um código personalizado usando as APIs de controle de alterações de baixo nível.</span><span class="sxs-lookup"><span data-stu-id="deda5-125">If your application requires working with disconnected graphs of entities, consider other alternatives such as [Trackable Entities](https://trackableentities.github.io/), which is a technology similar to Self-Tracking-Entities that is more actively developed by the community, or writing custom code using the low-level change tracking APIs.</span></span>
